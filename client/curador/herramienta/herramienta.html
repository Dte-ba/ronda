
<div class="dashboard__loading" layout="row" layout-align="center center" ng-show="$ctrl.loading">
	<md-progress-circular md-mode="indeterminate"></md-progress-circular>
</div>

<div class="dashboard__toolbar" ng-hide="$ctrl.loading">
	<rd-stepper class="dashboard__stepper" 
							rd-section="herramientas" 
							steps="$ctrl.steps"
							can-next="$ctrl.canNext" 
							on-finish="$ctrl.finish"
							on-enter-step="$ctrl.onEnterStep"
							on-save="$ctrl.save"
							init-step-index="$ctrl.initStepIndex"
							></rd-stepper>
</div>

<div class="dashboard__wrapper" ng-if="$ctrl.currentStep == 'ficha'" ng-hide="$ctrl.loading">
	<div class="dashboard__container"  layout="row" layout-align="start stretch">
		<md-content class="dashboard__sidenav sidenav__herramientas" ng-hide="$ctrl.currentStep === 'publicar'">
			<h2 class="dashboard__sidenav--head color-herramientas">Herramientas</h2>
			<md-input-container class="full-width">
				<md-select ng-model="$ctrl.resource.category" placeholder="Seleccioná un tipo" required>
					<md-option ng-value="soft" ng-repeat="soft in $ctrl.softwares">{{ soft }}</md-option>
				</md-select>
			</md-input-container>
			<md-content class="thumbnail__container">
				<div class="dropzone dz__custom dz__thumbnail select-thumbnail dz-clickable" options="$ctrl.dzOptions" callbacks="$ctrl.dzCallbacks" methods="$ctrl.dzMethods" ng-dropzone
						 ng-hide="$ctrl.resource.thumbnail !== ''"></div>
				<div class="thumbnail thumbnail--rounded" ng-hide="$ctrl.resource.thumbnail == ''">
					<img ng-src="{{$ctrl.resource.thumbnail}}" alt="Miniatura de la Herramienta">
					<md-button ng-click="$ctrl.editTumbnail()" class="mini-button md-button md-raised thumbnail__button--edit dz-tumbnail-clickable">
						<div layout="row">
								<md-icon class="mi-mode-edit"></md-icon> <span>Cambiar</span>
						</div>
					</md-button>
				</div>
			</md-content>
			<md-content>
				<md-expansion-panel class="option-panel">
					
					 <md-expansion-panel-collapsed>
						 <div class="md-title">Nivel *</div>
						 <div class="md-summary">{{$ctrl.resource.nivel.length}} {{$ctrl.textSelection($ctrl.resource.nivel.length)}}</div>
						 <md-expansion-panel-icon></md-expansion-panel-icon>
					 </md-expansion-panel-collapsed>
					
					
					 <md-expansion-panel-expanded>
					
						 <md-expansion-panel-header ng-click="$panel.collapse()">
							<div class="md-title">Nivel *</div>
							<div class="md-summary"></div>
							 <md-expansion-panel-icon></md-expansion-panel-icon>
						 </md-expansion-panel-header>
					
						 <md-expansion-panel-content>
								<div flex="100" ng-repeat="item in $ctrl.niveles">
									<md-checkbox ng-checked="$ctrl.exists(item, $ctrl.resource.nivel)" ng-click="$ctrl.toggle(item, $ctrl.resource.nivel)">
										{{ item }}
									</md-checkbox>
								</div>
						 </md-expansion-panel-content>
					
					 </md-expansion-panel-expanded>
					
				 </md-expansion-panel>
			</md-content>
			<md-content>
				<md-expansion-panel class="option-panel">
					
					 <md-expansion-panel-collapsed>
						 <div class="md-title">Area *</div>
						 <div class="md-summary">{{$ctrl.resource.area.length}} {{$ctrl.textSelection($ctrl.resource.area.length)}}</div>
						 <md-expansion-panel-icon></md-expansion-panel-icon>
					 </md-expansion-panel-collapsed>
					
					
					 <md-expansion-panel-expanded>
					
						 <md-expansion-panel-header ng-click="$panel.collapse()">
							 <div class="md-title">Area *</div>
							 <div class="md-summary"></div>
							 <md-expansion-panel-icon></md-expansion-panel-icon>
						 </md-expansion-panel-header>
					
						 <md-expansion-panel-content>
								<div flex="100" ng-repeat="item in $ctrl.areas">
										<md-checkbox ng-checked="$ctrl.exists(item, $ctrl.resource.area)" ng-click="$ctrl.toggle(item, $ctrl.resource.area)">
										{{ item }}
									</md-checkbox>
								</div>
						 </md-expansion-panel-content>
					
					 </md-expansion-panel-expanded>
					
				 </md-expansion-panel>
			</md-content>
		</md-content>
		
		<md-content  class="dashboard__content" flex>
			<div class="dashboard__content--head">
					<md-input-container class="dashboard__input dashboard__input--title">
						<label>Título</label>
						<input ng-model="$ctrl.resource.title" required>
					</md-input-container>
					<md-input-container  class="dashboard__input dashboard__input--summary">
						<label>Síntesis</label>
						<textarea ng-model="$ctrl.resource.summary" required></textarea>
					</md-input-container>
			</div>
			<rd-post modules="$ctrl.resource.postBody" relative="$ctrl.uid"></rd-post>
		</md-content>
	</div>
</div>

<div class="dashboard__wrapper" ng-if="$ctrl.currentStep == 'recurso'" ng-hide="$ctrl.loading">
	<div class="dashboard__container"  layout="row" layout-align="start stretch">
		<md-content class="dashboard__sidenav sidenav__herramientas" ng-hide="$ctrl.currentStep === 'publicar'">
			<div layout="row" class="dashboard__sidenav--top">
				<div class="thumbnail thumbnail--rounded thumbnail--50" ng-hide="$ctrl.resource.thumbnail == ''">
					<img ng-src="{{$ctrl.resource.thumbnail}}" alt="Miniatura de la Herramienta">
				</div>
				<div flex class="dashboard__sidenav--head-resource">
					<h2 class="dashboard__sidenav--head color-herramientas">Herramientas</h2>
					<h2 class="dashboard__sidenav--subhead color-herramientas">{{$ctrl.resource.category}}</h2>
				</div>
			</div>
			<h1 class="rd__headpost--title">{{$ctrl.resource.title}}</h1>
			<p class="rd__headpost">{{$ctrl.resource.summary}}</p>
		</md-content>
		
		<md-content  class="dashboard__content" flex>
				<div class="dropzone dz__custom dz__software dz-clickable"
						 options="$ctrl.dzOptionsSoftware"
						 callbacks="$ctrl.dzCallbacksSoftware"
						 methods="$ctrl.dzMethods"
						 ng-dropzone
						 ng-hide="$ctrl.resource.files.length > 0"></div>
				<div ng-show="$ctrl.resource.files.length > 0">
					<md-table-container class="table__files">
						<table md-table multiple>
							<thead md-head md-order="$ctrl.myOrder">
								<tr md-row>
									<th md-column>Nombre</th>
									<th md-column md-numeric>Tamaño</th>
								</tr>
							</thead>
							<tbody md-body>
								<tr ng-repeat="file in $ctrl.resource.files">
									<td md-cell><i class="{{file.icon}}"></i> <span>{{file.name}}</span></td>
									<td md-cell><span>{{file.size | numeraljs:'0b'}}</span></td>
								</tr>
								<tr class="table__files--summary-cell">
									<td md-cell></td>
									<td md-cell><span class="table__files--summary">{{$ctrl.resource.files.length}} Archivos, Total: {{$ctrl.sumfiles($ctrl.resource.files) | numeraljs:'0b'}}</span></td>
								</tr>
							</tbody>
						</table>
					</md-table-container>
					<div layout="row">
						<span flex></span>
						<md-button class="md-raised" ng-click="$ctrl.removeAllFiles()">Eliminar todos</md-button>
						<md-button class="md-raised dz-clickable" ng-click="null"><i class="fa fa-upload"></i> Agregar</md-button>
					</div>
				</div>
		</md-content>
	</div>
	
</div>